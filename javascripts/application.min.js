var MMCQ,PriorityQueue;PriorityQueue=function(){function t(t){this.comparator=t,this.contents=[],this.sorted=!1}return t.prototype.sort=function(){return this.contents.sort(this.comparator),this.sotred=!0},t.prototype.push=function(t){return this.contents.push(t),this.sorted=!1},t.prototype.peek=function(t){return null==t&&(t=this.contents.length-1),this.sorted||this.sort(),this.contents[t]},t.prototype.pop=function(){return this.sorted||this.sort(),this.contents.pop()},t.prototype.size=function(){return this.contents.length},t.prototype.map=function(t){return this.contents.map(t)},t}(),MMCQ=function(){var p,s,h,S,f,g;function d(){this.maxIterations=1e3,this.fractByPopulations=.75}return d.rshift=8-(d.sigbits=5),S=function(t,o,r){return(t<<2*d.sigbits)+(o<<d.sigbits)+r},p=function(){function t(t,o,r,e,n,i,s){this.r1=t,this.r2=o,this.g1=r,this.g2=e,this.b1=n,this.b2=i,this.histo=s}return t.prototype.volume=function(t){return this._volume&&!t||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},t.prototype.count=function(t){var o,r,e,n,i,s,c,a,u,h,f;if(!this._count_set||t){for(n=0,i=s=this.r1,u=this.r2;s<=u;i=s+=1)for(r=c=this.g1,h=this.g2;c<=h;r=c+=1)for(o=a=this.b1,f=this.b2;a<=f;o=a+=1)e=S(i,r,o),n+=this.histo[e]||0;this._count_set=!0,this._count=n}return this._count},t.prototype.copy=function(){return new t(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},t.prototype.average=function(t){var o,r,e,n,i,s,c,a,u,h,f,g,l,p,m,b;if(!this._average||t){for(c=1<<8-d.sigbits,r=n=u=h=0,a=f=this.r1,p=this.r2;f<=p;a=f+=1)for(e=g=this.g1,m=this.g2;g<=m;e=g+=1)for(o=l=this.b1,b=this.b2;l<=b;o=l+=1)s=S(a,e,o),h+=i=this.histo[s]||0,u+=i*(a+.5)*c,n+=i*(e+.5)*c,r+=i*(o+.5)*c;this._average=h?[~~(u/h),~~(n/h),~~(r/h)]:[~~(c*(this.r1+this.r2+1)/2),~~(c*(this.g1+this.g2+1)/2),~~(c*(this.b1+this.b2+1)/2)]}return this._average},t.prototype.contains=function(t){var o,r,e;return e=t[0]>>d.rshift,r=t[1]>>d.rshift,o=t[2]>>d.rshift,this.r1<=e&&e<=this.r2&&this.g1<=r&&r<=this.g2&&this.b1<=o&&o<=this.b2},t}(),s=function(){function t(){this.cboxes=new PriorityQueue(function(t,o){var r,e;return r=t.count()*t.volume(),(e=o.count()*o.volume())<r?1:r<e?-1:0})}return t.prototype.push=function(t){return this.cboxes.push({cbox:t,color:t.average()})},t.prototype.palette=function(){return this.cboxes.map(function(t){return t.color})},t.prototype.size=function(){return this.cboxes.size()},t.prototype.map=function(t){var o,r,e;for(o=r=0,e=this.cboxes.size();r<e;o=r+=1)return this.cboxes.peek(o).cbox.contains(t)?this.cboxes.peek(o).color:this.nearest(t)},t.prototype.cboxes=function(){return this.cboxes},t.prototype.nearest=function(t){var o,r,e,n,i,s,c;for(i=function(t){return t*t},e=1e9,r=s=0,c=this.cboxes.size();s<c;r=s+=1)(o=Math.sqrt(i(t[0]-this.cboxes.peek(r).color[0])+i(t[1]-this.cboxes.peek(r).color[1])+i(t[2]-this.cboxes.peek(r).color[2])))<e&&(e=o,n=this.cboxes.peek(r).color);return n},t}(),f=function(t){var o,r,e,n,i,s,c,a;for(e=new Array(1<<3*d.sigbits),c=0,a=t.length;c<a;c++)s=(i=t[c])[0]>>d.rshift,r=i[1]>>d.rshift,o=i[2]>>d.rshift,e[n=S(s,r,o)]=(e[n]||0)+1;return e},h=function(t,o){var r,e,n,i,s,c,a,u,h,f,g,l;for(n=c=f=1e6,g=e=s=h=0,l=t.length;g<l;g++)(u=(a=t[g])[0]>>d.rshift)<f?f=u:h<u&&(h=u),(i=a[1]>>d.rshift)<c?c=i:s<i&&(s=i),(r=a[2]>>d.rshift)<n?n=r:e<r&&(e=r);return new p(f,h,c,s,n,e,o)},g=function(t,g){var o,r,e,n,i,l,s,p,c,a,u,m,h,f,b,d,v,y,C,x,w,k,P,M,_,z,j,L,D,Q;if(g.count()){if(1===g.count())return[g.copy()];if(a=g.r2-g.r1+1,i=g.g2-g.g1+1,r=g.b2-g.b1+1,s=Math.max(a,i,r),m=0,p=[],l=[],s===a)for(c=h=g.r1,k=g.r2;h<=k;c=h+=1){for(u=0,n=f=g.g1,j=g.g2;f<=j;n=f+=1)for(o=b=g.b1,L=g.b2;b<=L;o=b+=1)u+=t[S(c,n,o)]||0;m+=u,p[c]=m}else if(s===i)for(n=d=g.g1,D=g.g2;d<=D;n=d+=1){for(u=0,c=v=g.r1,Q=g.r2;v<=Q;c=v+=1)for(o=y=g.b1,P=g.b2;y<=P;o=y+=1)u+=t[S(c,n,o)]||0;m+=u,p[n]=m}else for(o=C=g.b1,M=g.b2;C<=M;o=C+=1){for(u=0,c=x=g.r1,_=g.r2;x<=_;c=x+=1)for(n=w=g.g1,z=g.g2;w<=z;n=w+=1)u+=t[S(c,n,o)]||0;m+=u,p[o]=m}return p.forEach(function(t,o){return l[o]=m-t}),e=function(t){var o,r,e,n,i,s,c,a,u,h,f;for(s=t+"2",c=h=g[i=t+"1"],f=g[s];h<=f;c=h+=1)if(p[c]>m/2){for(o=g.copy(),r=g.copy(),n=(a=c-g[i])<=(u=g[s]-c)?Math.min(g[s]-1,~~(c+u/2)):Math.max(g[i],~~(c-1-a/2));!p[n];)n++;for(e=l[n];!e&&p[n-1];)e=l[--n];return o[s]=n,r[i]=o[s]+1,[o,r]}},s===a?e("r"):s===i?e("g"):s===r?e("b"):void 0}},d.prototype.quantize=function(t,o){var c,r,a,e,n,i,u=this;if(!t.length||o<2||256<o)return console.log("invalid arguments"),!1;for(a=f(t),c=h(t,a),(n=new PriorityQueue(function(t,o){var r,e;return r=t.count(),(e=o.count())<r?1:r<e?-1:0})).push(c),(e=function(t,o){var r,e,n,i,s;for(i=1,s=0;s<u.maxIterations;)if((c=t.pop()).count()){if(r=(n=g(a,c))[0],e=n[1],!r)return void console.log("cbox1 not defined; shouldn't happen");if(t.push(r),e&&(t.push(e),i++),o<=i)return;if(s++>u.maxIterations)return void console.log("infinite loop; perhaps too few pixels")}else t.push(c),s++})(n,this.fractByPopulations*o),i=new PriorityQueue(function(t,o){var r,e;return r=t.count()*t.volume(),(e=o.count()*o.volume())<r?1:r<e?-1:0});n.size();)i.push(n.pop());for(e(i,o-i.size()),r=new s;i.size();)r.push(i.pop());return r},d}.call(this),function(){window.ColorExtract=function(){function b(){}return b.getColorMap=function(t,o,r,e,n,i){var s,c,a,u,h,f,g,l,p,m;for(null==i&&(i=8),a=t.getContext("2d").getImageData(o,r,e,n).data,u=[],f=g=r,p=r+n;g<p;f=g+=1)for(c=f*e*4,h=l=o,m=o+e;l<m;h=l+=1)s=c+4*h,u.push([a[s],a[s+1],a[s+2]]);return(new MMCQ).quantize(u,i)},b.colorDist=function(t,o){var r;return(r=function(t){return t*t})(t[0]-o[0])+r(t[1]-o[1])+r(t[2]-o[2])},b.extract=function(t,o,r){var e,n,i,s,c,a,u,h,f,g,l,p,m;for(o.width=25,o.height=25,o.getContext("2d").drawImage(t,0,0,o.width,o.height),(n=b.getColorMap(o,0,0,o.width,o.height,4).cboxes.map(function(t){return{count:t.cbox.count(),rgb:t.color}})).sort(function(t,o){return o.count-t.count}),e=n[0].rgb,(u=b.getColorMap(o,0,0,t.width,t.height,10).cboxes.map(function(t){return{count:t.cbox.count(),rgb:t.color}})).sort(function(t,o){return o.count-t.count}),g=h=0,p=u.length;g<p;g++)i=u[g],h<(s=b.colorDist(e,i.rgb))&&(h=s,c=i.rgb);for(l=h=0,m=u.length;l<m;l++)i=u[l],h<(s=b.colorDist(e,i.rgb))&&i.rgb!==c&&(h=s,a=i.rgb);return r({bgColor:(f=function(t){return"rgb("+t[0]+", "+t[1]+", "+t[2]+")"})(e),fgColor:f(c),fgColor2:f(a)})},b}()}.call(this),function(f){var g=function(t,o){.5<=o?f(t).find("> .js-background-type").addClass("light-background").removeClass("dark-background"):f(t).find("> .js-background-type").addClass("dark-background").removeClass("light-background")},e=function(t,o){return function(r,e){if(r&&e){"string"==typeof r&&(r=r.replace(/rgba?\(/,"").replace(/\)/,"").split(","),f.each(r,function(t,o){r[t]=+o})),"string"==typeof e&&(e=e.replace(/rgba?\(/,"").replace(/\)/,"").split(","),f.each(e,function(t,o){e[t]=+o})),"object"==typeof r&&r.hasOwnProperty("length")&&3==r.length&&r.push(1),"object"==typeof e&&e.hasOwnProperty("length")&&3==e.length&&e.push(1);var t=[0,0,0,0];return t[3]=1-(1-e[3])*(1-r[3]),0===t[3]&&(t[3]=1e-6),t[0]=Math.min(e[0]*e[3]/t[3]+r[0]*r[3]*(1-e[3])/t[3],255),t[1]=Math.min(e[1]*e[3]/t[3]+r[1]*r[3]*(1-e[3])/t[3],255),t[2]=Math.min(e[2]*e[3]/t[3]+r[2]*r[3]*(1-e[3])/t[3],255),f.map(t,function(t){return Math.floor(t)})}}(t||[255,255,255,1],o||[255,255,255,1])},l=function(t,o){var r=e(t,o);return Math.round((.2126*+r[0]+.7152*+r[1]+.0722*+r[2])/2.55)/100};window.site=f.extend(window.site||{},{bgPickerPreview:function(o,t,r){var e=f(o).css("background-image"),n=t.imageSizes?function(t,o){for(var r,e=0,n=t.length;e<n;e++){if(t[e].width<o)return r||t[e];r=t[e]}return t[t.length-1]}(t.imageSizes,f(window).width()):null,i=t.image&&""!==t.image?"url("+n.url+")":"none",s=t.imageSizes&&""!==t.imageSizes?t.imageSizes:null,c=t.color&&""!==t.color?t.color:"rgba(0,0,0,0)",a=(t.colorData&&""!==t.colorData&&t.colorData.lightness,f("<img>")),u=f("<canvas>"),h=t.image&&""!==t.image?t.image:null;h?function(t,o){for(var r=t.length;r--;)if(-1<o.indexOf(t[r].url.trim()))return!0;return!1}(s,e)?(r.imageColor=r.imageColor?r.imageColor:defaultImageColor,r.combinedLightness=l(r.imageColor,c),g(o,r.combinedLightness)):(a.attr("src",h.replace(/.*\/(photos|voogstock)/g,"/photos")),a.on("load",function(){ColorExtract.extract(a[0],u[0],function(t){r.imageColor=t.bgColor?t.bgColor:"rgba(255,255,255,1)",r.combinedLightness=l(r.imageColor,c),g(o,r.combinedLightness)})})):(r.imageColor="rgba(255,255,255,1)",r.combinedLightness=l(r.imageColor,c),g(o,r.combinedLightness)),f(o).find(".js-background-image").first().css({"background-image":i}),f(o).find(".js-background-color").first().css({"background-color":c})},bgPickerCommit:function(t,o,r,e){var n=f.extend(!0,{},o);n.image=o.image||"",n.imageSizes=o.imageSizes||"",n.color=o.color||"",n.combinedLightness=r.combinedLightness,"articlePage"===e?Edicy.articles.currentArticle.setData(t,n):pageData.set(t,n)},bgPickerColorScheme:function(t){void 0!==t&&(.6<t?f(".header-wrapper").addClass("light").removeClass("dark"):f(".header-wrapper").addClass("dark").removeClass("light"))},initFrontPage:function(){optionalContent=f(".js-content-optional"),f.each(f(optionalContent),function(){optionalContentLength=f(this).text().trim().length,0<!optionalContentLength&&f(this).remove()})},initCommonPage:function(){},initBlogPage:function(){},initPostPage:function(){}}),f(".container").on("mousedown",function(t){f(t.target).closest(".js-prevent-sideclick").length||(f(".js-popover").removeClass("expanded"),f(".js-search-close-btn").trigger("click"))}),f(".menu-lang").find(".menu").change(function(){window.location=f(this).find(":selected").val()}),f(".js-menu-btn").click(function(){f(this).toggleClass("open"),f(".js-menu-main").toggleClass("expanded")}),f(document).ready(function(){f(".comment-form").hasClass("form_with_errors")?f("html, body").scrollTop(f(".comment-form").offset().top):0<f("form").find(".form_error, .form_notice").length&&f("html, body").scrollTop(f(".form_error, .form_notice").closest("form").offset().top)}),f("html").hasClass("editmode")?(window.edy=window.edy||[],edy.push(["texteditorStyles",{name:"Button",tagname:"a",attribute:{href:"#"},classname:"custom-btn",toggle:!0}])):f(".content-formatted table").wrap('<div class="table-container"></div>')}(jQuery);