var PriorityQueue=function(){function t(t){this.comparator=t,this.contents=[],this.sorted=!1}return t.prototype.sort=function(){return this.contents.sort(this.comparator),this.sotred=!0},t.prototype.push=function(t){return this.contents.push(t),this.sorted=!1},t.prototype.peek=function(t){return null==t&&(t=this.contents.length-1),this.sorted||this.sort(),this.contents[t]},t.prototype.pop=function(){return this.sorted||this.sort(),this.contents.pop()},t.prototype.size=function(){return this.contents.length},t.prototype.map=function(t){return this.contents.map(t)},t}(),MMCQ=function(){var g,r,u,I,h,l;function m(){this.maxIterations=1e3,this.fractByPopulations=.75}function t(t,o,e,n,i,r,s){this.r1=t,this.r2=o,this.g1=e,this.g2=n,this.b1=i,this.b2=r,this.histo=s}function o(){this.cboxes=new PriorityQueue(function(t,o){t=t.count()*t.volume(),o=o.count()*o.volume();return o<t?1:t<o?-1:0})}return m.rshift=8-(m.sigbits=5),I=function(t,o,e){return(t<<2*m.sigbits)+(o<<m.sigbits)+e},t.prototype.volume=function(t){return this._volume&&!t||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},t.prototype.count=function(t){var o,e,n,i,r,s,c,a,u,h,l;if(!this._count_set||t){for(i=0,r=s=this.r1,u=this.r2;s<=u;r=s+=1)for(e=c=this.g1,h=this.g2;c<=h;e=c+=1)for(o=a=this.b1,l=this.b2;a<=l;o=a+=1)n=I(r,e,o),i+=this.histo[n]||0;this._count_set=!0,this._count=i}return this._count},t.prototype.copy=function(){return new t(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},t.prototype.average=function(t){var o,e,n,i,r,s,c,a,u,h,l,g,f,p,d;if(!this._average||t){for(s=1<<8-m.sigbits,e=i=a=u=0,c=h=this.r1,f=this.r2;h<=f;c=h+=1)for(n=l=this.g1,p=this.g2;l<=p;n=l+=1)for(o=g=this.b1,d=this.b2;g<=d;o=g+=1)r=I(c,n,o),u+=r=this.histo[r]||0,a+=r*(c+.5)*s,i+=r*(n+.5)*s,e+=r*(o+.5)*s;this._average=u?[~~(a/u),~~(i/u),~~(e/u)]:[~~(s*(this.r1+this.r2+1)/2),~~(s*(this.g1+this.g2+1)/2),~~(s*(this.b1+this.b2+1)/2)]}return this._average},t.prototype.contains=function(t){var o=t[0]>>m.rshift,e=t[1]>>m.rshift,t=t[2]>>m.rshift;return this.r1<=o&&o<=this.r2&&this.g1<=e&&e<=this.g2&&this.b1<=t&&t<=this.b2},g=t,o.prototype.push=function(t){return this.cboxes.push({cbox:t,color:t.average()})},o.prototype.palette=function(){return this.cboxes.map(function(t){return t.color})},o.prototype.size=function(){return this.cboxes.size()},o.prototype.map=function(t){var o,e=o=0,n=this.cboxes.size();if(o<n)return this.cboxes.peek(e).cbox.contains(t)?this.cboxes.peek(e).color:this.nearest(t)},o.prototype.cboxes=function(){return this.cboxes},o.prototype.nearest=function(t){for(var o,e,n,i=function(t){return t*t},r=1e9,s=n=0,c=this.cboxes.size();n<c;s=n+=1)(o=Math.sqrt(i(t[0]-this.cboxes.peek(s).color[0])+i(t[1]-this.cboxes.peek(s).color[1])+i(t[2]-this.cboxes.peek(s).color[2])))<r&&(r=o,e=this.cboxes.peek(s).color);return e},r=o,h=function(t){for(var o,e,n,i=new Array(1<<3*m.sigbits),r=0,s=t.length;r<s;r++)n=(e=t[r])[0]>>m.rshift,o=e[1]>>m.rshift,e=e[2]>>m.rshift,i[e=I(n,o,e)]=(i[e]||0)+1;return i},u=function(t,o){for(var e,n,i=1e6,r=0,s=1e6,c=0,a=1e6,u=0,h=0,l=t.length;h<l;h++)(n=(e=t[h])[0]>>m.rshift)<i?i=n:r<n&&(r=n),(n=e[1]>>m.rshift)<s?s=n:c<n&&(c=n),(e=e[2]>>m.rshift)<a?a=e:u<e&&(u=e);return new g(i,r,s,c,a,u,o)},l=function(t,g){var o,e,n,i,r,f,s,p,c,a,u,d,h,l,m,b,v,y,C,w,x,k,_,j,P,z,M,L,S,D;if(g.count()){if(1===g.count())return[g.copy()];if(a=g.r2-g.r1+1,r=g.g2-g.g1+1,e=g.b2-g.b1+1,s=Math.max(a,r,e),d=0,p=[],f=[],s===a)for(c=h=g.r1,k=g.r2;h<=k;c=h+=1){for(u=0,i=l=g.g1,M=g.g2;l<=M;i=l+=1)for(o=m=g.b1,L=g.b2;m<=L;o=m+=1)u+=t[I(c,i,o)]||0;d+=u,p[c]=d}else if(s===r)for(i=b=g.g1,S=g.g2;b<=S;i=b+=1){for(u=0,c=v=g.r1,D=g.r2;v<=D;c=v+=1)for(o=y=g.b1,_=g.b2;y<=_;o=y+=1)u+=t[I(c,i,o)]||0;d+=u,p[i]=d}else for(o=C=g.b1,j=g.b2;C<=j;o=C+=1){for(u=0,c=w=g.r1,P=g.r2;w<=P;c=w+=1)for(i=x=g.g1,z=g.g2;x<=z;i=x+=1)u+=t[I(c,i,o)]||0;d+=u,p[o]=d}return p.forEach(function(t,o){return f[o]=d-t}),n=function(t){for(var o,e,n,i,r,s,c,a=t+"1",u=t+"2",h=c=g[a],l=g[u];c<=l;h=c+=1)if(p[h]>d/2){for(o=g.copy(),e=g.copy(),i=(r=h-g[a])<=(s=g[u]-h)?Math.min(g[u]-1,~~(h+s/2)):Math.max(g[a],~~(h-1-r/2));!p[i];)i++;for(n=f[i];!n&&p[i-1];)n=f[--i];return o[u]=i,e[a]=o[u]+1,[o,e]}},s===a?n("r"):s===r?n("g"):s===e?n("b"):void 0}},m.prototype.quantize=function(t,o){var s,e,c,n,i,a=this;if(!t.length||o<2||256<o)return console.log("invalid arguments"),!1;for(c=h(t),s=u(t,c),(n=new PriorityQueue(function(t,o){t=t.count(),o=o.count();return o<t?1:t<o?-1:0})).push(s),(t=function(t,o){for(var e,n,i=1,r=0;r<a.maxIterations;)if((s=t.pop()).count()){if(e=(n=l(c,s))[0],n=n[1],!e)return void console.log("cbox1 not defined; shouldn't happen");if(t.push(e),n&&(t.push(n),i++),o<=i)return;if(r++>a.maxIterations)return void console.log("infinite loop; perhaps too few pixels")}else t.push(s),r++})(n,this.fractByPopulations*o),i=new PriorityQueue(function(t,o){t=t.count()*t.volume(),o=o.count()*o.volume();return o<t?1:t<o?-1:0});n.size();)i.push(n.pop());for(t(i,o-i.size()),e=new r;i.size();)e.push(i.pop());return e},m}.call(this);(function(){function d(){}window.ColorExtract=(d.getColorMap=function(t,o,e,n,i,r){var s,c,a,u,h,l,g,f,p,d;for(null==r&&(r=8),a=t.getContext("2d").getImageData(o,e,n,i).data,u=[],p=(l=g=e)+i;g<p;l=g+=1)for(c=l*n*4,d=(h=f=o)+n;f<d;h=f+=1)u.push([a[s=c+4*h],a[1+s],a[2+s]]);return(new MMCQ).quantize(u,r)},d.colorDist=function(t,o){var e=function(t){return t*t};return e(t[0]-o[0])+e(t[1]-o[1])+e(t[2]-o[2])},d.extract=function(t,o,e){var n,i,r,s,c,a,u,h,l,g,f,p;for(o.width=25,o.height=25,o.getContext("2d").drawImage(t,0,0,o.width,o.height),(i=d.getColorMap(o,0,0,o.width,o.height,4).cboxes.map(function(t){return{count:t.cbox.count(),rgb:t.color}})).sort(function(t,o){return o.count-t.count}),n=i[0].rgb,(u=d.getColorMap(o,0,0,t.width,t.height,10).cboxes.map(function(t){return{count:t.cbox.count(),rgb:t.color}})).sort(function(t,o){return o.count-t.count}),l=h=0,f=u.length;l<f;l++)r=u[l],h<(s=d.colorDist(n,r.rgb))&&(h=s,c=r.rgb);for(g=h=0,p=u.length;g<p;g++)r=u[g],h<(s=d.colorDist(n,r.rgb))&&r.rgb!==c&&(h=s,a=r.rgb);return e({bgColor:(e=function(t){return"rgb("+t[0]+", "+t[1]+", "+t[2]+")"})(n),fgColor:e(c),fgColor2:e(a)})},d)}).call(this),function(u){function h(t,o){.5<=o?u(t).find("> .js-background-type").addClass("light-background").removeClass("dark-background"):u(t).find("> .js-background-type").addClass("dark-background").removeClass("light-background")}function e(t,o){return function(e,n){if(e&&n){"string"==typeof e&&(e=e.replace(/rgba?\(/,"").replace(/\)/,"").split(","),u.each(e,function(t,o){e[t]=+o})),"string"==typeof n&&(n=n.replace(/rgba?\(/,"").replace(/\)/,"").split(","),u.each(n,function(t,o){n[t]=+o})),"object"==typeof e&&e.hasOwnProperty("length")&&3==e.length&&e.push(1),"object"==typeof n&&n.hasOwnProperty("length")&&3==n.length&&n.push(1);var t=[0,0,0,0];return t[3]=1-(1-n[3])*(1-e[3]),0===t[3]&&(t[3]=1e-6),t[0]=Math.min(n[0]*n[3]/t[3]+e[0]*e[3]*(1-n[3])/t[3],255),t[1]=Math.min(n[1]*n[3]/t[3]+e[1]*e[3]*(1-n[3])/t[3],255),t[2]=Math.min(n[2]*n[3]/t[3]+e[2]*e[3]*(1-n[3])/t[3],255),u.map(t,function(t){return Math.floor(t)})}}(t||[255,255,255,1],o||[255,255,255,1])}function t(){u(".js-image-settings-popover").toggleClass("active")}var l=function(t,o){o=e(t,o);return Math.round((.2126*+o[0]+.7152*+o[1]+.0722*+o[2])/2.55)/100};u(".js-toggle-image-settings").click(function(){t()});var o,n;new LazyLoad({threshold:500,elements_selector:".js-lazyload",callback_loaded:function(t){u(t).closest(".js-content-item-box").removeClass("not-loaded with-error").addClass("is-loaded")}});o=u(".js-toggle-image-settings"),n=t,o.focus(function(){u(window).keyup(function(t){9==(t.keyCode||t.which)&&n()})});u(".js-cart-btn").click(function(){u(this).data("product-id")&&Voog.ShoppingCart.addProductById(u(this).data("product-id"))}),window.site=u.extend(window.site||{},{bgPickerPreview:function(o,t,e){var n=u(o).css("background-image"),i=t.imageSizes?function(t,o){for(var e,n=0,i=t.length;n<i;n++){if(t[n].width<o)return e||t[n];e=t[n]}return t[t.length-1]}(t.imageSizes,u(window).width()):null,r=t.image&&""!==t.image?"url("+i.url+")":"none",i=t.imageSizes&&""!==t.imageSizes?t.imageSizes:null,s=t.color&&""!==t.color?t.color:"rgba(0,0,0,0)",c=(t.colorData&&""!==t.colorData&&t.colorData.lightness,u("<img>")),a=u("<canvas>"),t=t.image&&""!==t.image?t.image:null;t?!function(t,o){for(var e=t.length;e--;)if(-1<o.indexOf(t[e].url.trim()))return!0;return!1}(i,n)?(c.attr("src",t.replace(/.*\/(photos|voogstock)/g,"/photos")),c.on("load",function(){ColorExtract.extract(c[0],a[0],function(t){e.imageColor=t.bgColor||"rgba(255,255,255,1)",e.combinedLightness=l(e.imageColor,s),h(o,e.combinedLightness)})})):(e.imageColor=e.imageColor||defaultImageColor,e.combinedLightness=l(e.imageColor,s),h(o,e.combinedLightness)):(e.imageColor="rgba(255,255,255,1)",e.combinedLightness=l(e.imageColor,s),h(o,e.combinedLightness)),u(o).find(".js-background-image").first().css({"background-image":r}),u(o).find(".js-background-color").first().css({"background-color":s})},bgPickerCommit:function(t,o,e,n){var i,r=u.extend(!0,{},o);r.image=o.image||"",r.imageSizes=null==(i=o.imageSizes)||"string"==typeof i&&i.match(/^[\\'"]+$/)?"":i,r.color=o.color||"",r.combinedLightness=e.combinedLightness,"articlePage"===n?Edicy.articles.currentArticle.setData(t,r):pageData.set(t,r)},bgPickerColorScheme:function(t){void 0!==t&&(.6<t?u(".header-wrapper").addClass("light").removeClass("dark"):u(".header-wrapper").addClass("dark").removeClass("light"))},initFrontPage:function(){optionalContent=u(".js-content-optional"),u.each(u(optionalContent),function(){optionalContentLength=u(this).text().trim().length,0<!optionalContentLength&&u(this).remove()})},initCommonPage:function(){},initProductPage:function(){},initProductListPage:function(){},initBlogPage:function(){},initPostPage:function(){},bindSiteSearch:function(t,o,e){t&&new VoogSearch(t,{per_page:10,lang:o,resultsContainer:u(".js-voog-search-modal-inner").get(0),sideclick:!0,mobileModeWidth:480,updateOnKeypress:!0,noResults:e})},handleProductPageContent:function(){var n,i,r,s;u(document).ready(function(){t()}),u(window).resize((n=function(){t()},i=25,function(){var t=this,o=arguments,e=r&&!s;clearTimeout(s),s=setTimeout(function(){s=null,r||n.apply(t,o)},i),e&&n.apply(t,o)}));var t=function(){var t=u(".js-product-page-image"),o=u(".js-product-page-image-wrap"),e=u(".js-buy-btn-content");1<=u(".js-buy-btn-content .edy-buy-button-container").length&&(u(window).width()<=752?u(".js-buy-btn-content .js-product-page-image").length<=0&&e.prepend(t):u(".js-product-page-image-wrap .js-product-page-image").length<=0&&o.prepend(t))}}}),u(".container").on("mousedown",function(t){u(t.target).closest(".js-prevent-sideclick").length||(u(".js-popover").removeClass("expanded"),u(".js-search-close-btn").trigger("click"),u(".js-image-settings-popover").toggleClass("active"))}),u(".menu-lang").find(".menu").change(function(){window.location=u(this).find(":selected").val()}),u(".js-menu-btn").click(function(){u(this).toggleClass("open"),u(".js-menu-main").toggleClass("expanded")}),u(document).ready(function(){u(".comment-form").hasClass("form_with_errors")?u("html, body").scrollTop(u(".comment-form").offset().top):0<u("form").find(".form_error, .form_notice").length&&u("html, body").scrollTop(u(".form_error, .form_notice").closest("form").offset().top)}),u(".form_field-cms input").length&&(1<=u(".form_field-cms input").val().length?u(".form_field-cms input").closest(".form_field-cms").addClass("with-input"):u(".form_field-cms input").closest(".form_field-cms").removeClass("with-input")),u(document).ready(function(){u(".form_field-cms input").keyup(function(t){1<=u(this).val().length?u(this).closest(".form_field-cms").addClass("with-input"):u(this).closest(".form_field-cms").removeClass("with-input")})})}(jQuery);